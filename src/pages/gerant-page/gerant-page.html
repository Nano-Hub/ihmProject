<!--
  Generated template for the GerantPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Bons du Magasin</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
	<div padding>
	  <ion-segment [(ngModel)]="bonsGerant">
		<ion-segment-button value="nosBons">
		 Nos Bons
		</ion-segment-button>
		<ion-segment-button value="nouveauBon">
		  Nouveau bon
		</ion-segment-button>
	  </ion-segment>
	</div>

	<div [ngSwitch]="bonsGerant">
		<ion-list *ngSwitchCase="'nosBons'">
			<ion-searchbar (ionInput)="getNosCoupons($event)"></ion-searchbar>
			<ion-list>
				<ion-item *ngFor="let coupon of nosCoupons">
					<ion-thumbnail item-left>
						<img src="assets/img/thumbnail-totoro.png">
					</ion-thumbnail>
					<h2>{{ coupon.nom }}</h2>
					<p>Reduction : {{ coupon.reduction }}</p>
					<p>Date limite : {{coupon.delai}}</p>
					<p>Quantité limite : {{coupon.quantite}}</p>
					<button ion-button (click)="deleteCoupon(coupon)" color="danger" outline icon-left item-right>
						Supprimer
					</button>
				</ion-item>
			</ion-list>
		</ion-list>

		<ion-list *ngSwitchCase="'nouveauBon'">
			 <div>
				<form (ngSubmit)="createBon()" #registerForm="ngForm">
				  <ion-row>
					<ion-col>
						<ion-list inset>
							<ion-item>
								<ion-label stacked>Réduction</ion-label>
							</ion-item>
							<ion-item>
								<ion-input type="text" name="reduction" placeholder="ex : -5€, -20%..."[(ngModel)]="bon.reduction" required></ion-input>
							</ion-item>
							<ion-item>
								<ion-label stacked>Quantité limite:</ion-label>
								<ion-toggle name="toggle2" [(ngModel)]="quantiteToggle"></ion-toggle>
							</ion-item>
							<ion-item>
								<ion-input type="text" name="quantite" placeholder="ex : 1, 5, 12..." [(ngModel)]="bon.quantite" [disabled]="!quantiteToggle"></ion-input>
							</ion-item>
							<ion-item>
								<ion-label stacked>Date limite:</ion-label>
								<ion-toggle name="toggle1" [(ngModel)]="dateToggle"></ion-toggle>
							</ion-item>
							<ion-item>
								<ion-datetime displayFormat="DD MMM YYYY" name="date" [(ngModel)]="bon.delai" [disabled]="!dateToggle"></ion-datetime>
							</ion-item>
						</ion-list>
					</ion-col>
				  </ion-row>

				  <ion-row>
					<ion-col>
					  <button ion-button type="submit" [disabled]="!registerForm.form.valid">Créer un bon</button>
					</ion-col>
				  </ion-row>

				</form>
			</div>
		</ion-list>
	</div>
</ion-content>
